## 重力和跳跃

让我们通过添加重力并使他们跳跃来让你的角色移动得更加真实。



+ 你可能注意到了，你的角色可走下平台并进入半空中。试着走下平台，看看会发生什么。

	![screenshot](images/dodge-no-gravity.png)

+ 为解决这个问题，我们要向你的游戏添加重力。创建一个被称作 `重力`{:class="blockdata"}的新变量。如果你愿意，你可以在工作区中隐藏此变量。

	![screenshot](images/dodge-gravity.png)

+ 添加这个新的代码块，将重力设为负值，然后使用其来反复更改你角色的 y 坐标。

	```blocks
		点击绿旗时
    变量 [gravity v] 设为 [-4]
    重复无限次 
      y 改变 (gravity)
    end
	```

+ 点击旗帜，然后将你的角色拖到工作区顶部。发生了什么？重力是否按预期发挥作用？

	![screenshot](images/dodge-gravity-drag.png)

+ 重力不应该使你的角色穿过平台或梯子！向你的代码添加一个 `如果`{:class="blockcontrol"}代码块，使重力仅在你的角色处于半空时生效。重力代码现在应如下所示：

	```blocks
		点击绿旗时
    变量 [gravity v] 设为 [-4]
    重复无限次 
      如果 <<<碰到颜色 [#0000FF] ?> 或 <碰到颜色 [#FF69B4] ?>> 不成立> 那么 
        y 改变 (gravity)
      end
    end
	```

+ 再次测试重力。你的角色在处于平台或梯子上时是否停止移动？你能否走下平台边缘到达下方的平面？

	![screenshot](images/dodge-gravity-test.png)

+ 此外，让我们使你的角色在玩家按下空格键时能跳跃。要做到这一点，一个非常简单的方法是使用以下代码，使你的角色多次上移：

	```blocks
		当 [空格 v] 键被按下
    重复 (10) 次 
      y 改变 (4)
    end
	```

	由于重力不断将你的角色向下推移 4 个像素，你需要在你的 `将 y 坐标增加 (4)`{:class="blockmotion"}代码块中选择一个大于 4 的数字。不断改变这个数字，直至你对角色跳跃的高度感到满意。

+ 如果你测试此代码，你会注意到代码起作用了，但移动不是十分流畅。为使跳跃看起来更流畅，你需要使你角色移动的幅度越来越小，直至它们不再跳跃。

+ 为此，创建另一个名为 `跳跃高度`{:class="blockdata"}的变量。如果你愿意的话，你也可以隐藏该变量。

+ 删除你向角色添加的跳跃代码，并替换为下列代码：

	```blocks
		当 [空格 v] 键被按下
    变量 [jump height v] 设为 [8]
    重复直到 <(jump height) = [0]> 
      y 改变 (jump height)
      变量 [jump height v] 改变 (-0.5)
    end
	```

	此代码使你的角色上移 8 个像素，然后 7.5 个像素，再然后 7 个像素，以此类推，直至你的角色完成跳跃。这使跳跃看起来更加流畅。

+ 更改 `跳跃高度`{:class="blockdata"}变量的初始值并对其进行测试，直至你对角色跳跃的高度感到满意。



