## الجاذبية والقفز

لنجعل الشخصية تتحرك بشكل أكثر واقعية، وذلك عن طريق إضافة الجاذبية والسماح للشخصية بالقفز.



+ ربما لاحظتَ أن الشخصية تسير في الهواء بعدما تغادر المنصة. جرِّب أن تغادر المنصة ولاحظ ما يحدث.

	![screenshot](images/dodge-no-gravity.png)

+ لإصلاح ذلك، لنضِف الجاذبية إلى اللعبة. أنشئ متغيرًا جديدًا يُسمى `الجاذبية`{:class="blockdata"}. يمكنك إخفاء هذا المتغير من المنصة إذا أردتَ.

	![screenshot](images/dodge-gravity.png)

+ أضف قالب التعليمات البرمجية هذا، والتي ستعيِّن الجاذبية إلى قيمة سالبة، ثم تستخدم ذلك لتغيير الإحداثي y للشخصية بشكل متكرِّر.

	```blocks
		when flag clicked
		set [gravity v] to [-4]
		forever
			change y by (gravity)
		end
	```

+ انقر فوق العلم، ثم اسحب الشخصية إلى أعلى المنصة. ماذا يحدث؟ هل تعمل الجاذبية كما توقعت؟

	![screenshot](images/dodge-gravity-drag.png)

+ لن تسمح الجاذبية للشخصية بالتحرك على المنصة أو صعود الدرجات! لذا أضف قالب `if`{:class="blockcontrol"} إلى التعليمات البرمجية، بحيث تعمل الجاذبية فقط عندما تكون الشخصية في الهواء. يجب أن تكون التعليمة البرمجية للجاذبية كما يلي:

  ```blocks
		when flag clicked
		set [gravity v] to [-4]
		forever
			if < not < <touching color [#0000FF]?> or <touching color [#FF69B4]?> > > then
				change y by (gravity)
			end
		end
	```

+ اختبر الجاذبية مرة أخرى. هل تتوقف الشخصية عندما تكون على منصة أو درجة؟ هل تغادر الشخصية حواف المنصات إلى المستوى الأدنى؟

	![screenshot](images/dodge-gravity-test.png)

+ لنجعل الشخصية تقفز أيضًا عندما يضغط اللاعب على مفتاح المسافة. توجد طريقة سهلة جدًا لفعل ذلك، وهي تحريك الشخصية إلى أعلى عدة مرات باستخدام التعليمة البرمجية التالية:

	```blocks
		when [space v] key pressed
		repeat (10)
			change y by (4)
		end
	```

	لأن الجاذبية تسحب الشخصية إلى أسفل بمقدار 4 بكسل باستمرار، ستحتاج إلى اختيار رقم أكبر من 4 في القالب `غيِّر بمقدار (4)`{:class="blockmotion"}. غيِّر هذا الرقم حتى تحصل على ارتفاع القفزة الذي تريده للشخصية.

+ إذا اختبرتَ هذه التعليمة البرمجية، فستلاحظ أنها تعمل بالشكل المطلوب، إلا أن الحركة ليست سلسة بما يكفي. لتجعل حركة القفز تبدو سلسة بما يكفي، ستحتاج إلى تحريك الشخصية بقيم أقل فأقل حتى تصل القفزة إلى نهايتها.

+ لتفعل ذلك، أنشئ متغيرًا آخر يُسمى `ارتفاع القفزة`{:class="blockdata"}. ويمكنك إخفاء هذا المتغير أيضًا إذا أردتَ.

+ احذف التعليمة البرمجية للقفز التي أضفتها إلى الشخصية، واستخدم هذه التعليمة البرمجية بدلًا منها:

	
	```blocks
		when [space v] key pressed
		set [jump height v] to [8]
		repeat until < (jump height) = [0] >
			change y by (jump height)
			change [jump height v] by (-0.5)
		end
	```

	ستحرِّك هذه التعليمةُ البرمجية شخصيتَك بمقدار 8 بكسل، ثم 7.5 بكسل، ثم 7 بكسل، وهكذا حتى تصل قفزة الشخصية إلى نهايتها. وبذلك ستبدو القفزة سلسة جدًا.

+ غيِّر القيمة التي يبدأ بها المتغير `ارتفاع القفزة`{:class="blockdata"} واختبر هذا المتغير إلى أن تحصل على ارتفاع القفزة الذي تريده للشخصية.



